"use strict";$(function(){var c={getStorage:function(){return JSON.parse(localStorage.getItem("list")||"[]")},setStorage:function(t){localStorage.setItem("list",JSON.stringify(t))},init:function(){var t=this.getStorage();this.addDeleteEvent(),this.render(t,"cartMainBox",function(){c.addDeleteEvent(),c.addNumChangeEvent(),c.yinCan(),c.shul(),c.zonj(),c.qx()})},render:function(t,n,e){n=document.getElementsByClassName("container")[0];if(t.length<0)n.innerHTML="";else{for(var a='<table class="table table1">\n                        <thead>\n                            <tr class="cartTr">\n                            <th><input type="checkbox" class="qx">&nbsp 全选</th>\n                            <th>编号</th>\n                            <th>图片</th>\n                            <th>商品名称</th>\n                            <th>尺寸</th>\n                            <th>单价</th>\n                            <th>数量</th>\n                            <th>小计</th>\n                            <th>操作</th>\n                        </tr>\n                        <tr class="cartTr0">\n                            <td></td>\n                            <td></td>\n                            <td></td>\n                            <td></td>\n                            <td></td>\n                            <td></td>\n                            <td></td>\n                            <td></td>\n                        </tr>\n                    </thead>\n                    <tbody>',c=0;c<t.length;c++)a+="<tr class=\"trMain\">\n                            <td>\n                                <input type=\"checkbox\" class='xz'>\n                            </td>\n                            <td class='cargoId'>\n                                ".concat(t[c].id,'\n                            </td>\n                            <td>\n                                <img class="cart99" src="').concat(t[c].img,'" />\n                            </td>\n                            <td>\n                                ').concat(t[c].name,"\n                            </td>\n                            <td>\n                                <span class='cartSize'>s</span>\n                            </td>\n                            <td>\n                                ￥<em type=\"01\">").concat(t[c].price,'</em>\n                            </td>\n                            <td>\n                                <a href="#" class="iconfont icon-jianhaoshouqi jian a-a cut"></a>\n                                <input type="text" name="" class="inp1" value="').concat(t[c].num,'">\n                                <a href="#" class="iconfont icon-jiahaozhankai jia a-a add"></a>\n                            </td>\n                            <td>\n                                    ￥<em class="zj">').concat(t[c].price*t[c].num,"</em><em>.00</em>\n                            </td>\n                            <td>\n                                <a href=\"#\" class='delete'>删除</a>\n                            </td>\n                        </tr>");a+='<tr class="cartTr0">\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                    </tr>\n                </tbody>\n                </table>',document.getElementsByClassName("cartMainBox")[0].innerHTML=a,e&&e()}},addDeleteEvent:function(){for(var n=this,t=document.getElementsByClassName("delete"),e=0;e<t.length;e++)t[e].onclick=function(){var t=this.parentNode.parentNode.children[1].innerHTML.trim();n.deleteProduct(t),n.addNumChangeEvent()}},deleteProduct:function(t){for(var n=this,e=this.getStorage(),a=0;a<e.length;a++)if(e[a].id==t)return e.splice(a,1),this.setStorage(e),void this.render(e,"cartMainBox",function(){n.addDeleteEvent(),n.addNumChangeEvent(),c.yinCan(),c.shul(),c.zonj(),c.qx()})},addNumChangeEvent:function(){for(var n=this,t=document.querySelectorAll(".cut"),e=document.querySelectorAll(".add"),a=0;a<e.length;a++)e[a].onclick=function(){var t=this.parentNode.parentNode.children[1].innerHTML.trim();n.addNum(t)},t[a].onclick=function(){var t=this.parentNode.parentNode.children[1].innerHTML.trim();n.cutNum(t)}},addNum:function(t){for(var n=this,e=this.getStorage(),a=0;a<=e.length;a++)if(e[a].id==t)return e[a].num=e[a].num+1,this.setStorage(e),void this.render(e,"cartMainBox",function(){n.addDeleteEvent(),n.addNumChangeEvent(),c.yinCan(),c.shul(),c.zonj(),c.qx()})},cutNum:function(t){for(var n=this,e=this.getStorage(),a=0;a<=e.length;a++)if(e[a].id==t)return e[a].num=e[a].num-1,e[a].num<=0?void n.deleteProduct(t):(this.setStorage(e),void this.render(e,"cartMainBox",function(){n.addDeleteEvent(),n.addNumChangeEvent(),c.yinCan(),c.shul(),c.zonj(),c.qx()}))},yinCan:function(){$(".trMain").size()<=0?($(".cart").css("display","none"),$(".cartBox5").css("display","block")):($(".cart").css("display","block"),$(".cartBox5").css("display","none"))},shul:function(){for(var t=$(".inp1").get(),n="",e=0;e<t.length;e++)n+=t[0].value;$(".cargoNum").text(n)},zonj:function(){for(var t=$(".zj").get(),n="",e=0;e<t.length;e++)n+=t[0].innerHTML;$(".cartEm2").text(n)},qx:function(){$(".qx").on("click",function(){1==$(".qx").prop("checked")?$("input").prop("checked",!0):$("input").prop("checked",!1)}),$(".qx1").on("click",function(){1==$(".qx1").prop("checked")?$("input").prop("checked",!0):$("input").prop("checked",!1)}),$(".xz").on("click",function(){1==$(".xz").prop("checked")&&!1!==$(".xz").prop("checked")?($(".qx").prop("checked",!0),$(".qx1").prop("checked",!0)):($(".qx").prop("checked",!1),$(".qx1").prop("checked",!1))})}};c.init(),c.addDeleteEvent(),c.deleteProduct(),c.addNumChangeEvent();for(var t=c.getStorage(),n=0;n<t.length;n++){console.log(t[n]);var e=t[n];$(".cartA-1").on("click",function(){1==$(".xz").prop("checked")&&$(".cargoId").text().trim()==e.id&&(t.splice(e,1),c.setStorage(t),c.render(t,"cartMainBox",function(){c.addDeleteEvent(),c.addNumChangeEvent(),c.yinCan(),c.shul(),c.zonj(),c.qx()}))})}});