"use strict";$(function(){var o,n,i,s,c,a,p,l,u;(o=JSON.parse('{"display":"block","color":"green"}'),n=JSON.parse('{"display":"none"}'),u=l=p=a=c=s=!(i=/^([0-9a-zA-Z]|(_|\W)){6,16}$/),{init:function(){$(".yzmbox").html(this.common().yzm(6)),$(".yzmbox").css("color",this.common().color()),document.onselectstart=new Function("return false"),window.history&&window.history.pushState&&$(window).on("popstate",function(){window.history.pushState("forward",null,"#"),window.history.forward(1),location.replace(document.referrer)}),window.history.pushState("forward",null,"#"),window.history.forward(1),$("[name=register]").eq(1).prop("checked",!0),$("[name=register]").eq(0).prop("checked",!1),this.event()},event:function(){var t=this;$(".yzmbtn").on("click",function(){return $(".yzmbox").html(t.common().yzm(6)),$(".yzmbox").css("color",t.common().color()),!1}),$("[name=register]").each(function(r,e){$(e).on("change",function(){if(0===r)return $(".unlogin").attr("name","un"),$(".pwlogin").attr("name","pw"),$(".unreg").removeAttr("name","un"),$(".pwreg").removeAttr("name","un"),$("[name=register]").eq(0).prop("checked",!0),$("[name=register]").eq(1).prop("checked",!1),$(".registerId").eq(1).hide(),$(".registerId").eq(0).show(),$(".submitBox").children("span:nth-child(2)").remove(),$(".submitBox").children("span:nth-child(1)").html("登陆"),void(""!==$(".loignReg").val()&&(l=!0));if(1===r){$(".unreg").attr("name","un"),$(".pwreg").attr("name","pw"),$(".unlogin").removeAttr("name","un"),$(".pwlogin").removeAttr("name","un"),$(".yzmbox").html(t.common().yzm(6)),$(".yzmbox").css("color",t.common().color()),$("[name=register]").eq(1).prop("checked",!0),$("[name=register]").eq(0).prop("checked",!1),$(".registerId").eq(0).hide(),$(".registerId").eq(1).show();var e=$('<span style="cursor:pointer;">不关联，直接购物</span>');return $(".submitBox").append(e),$(".submitBox").children("span:nth-child(1)").html("确定"),void(""===$(".unreg").val()&&""===$(".pwreg").val()&&""===$(".yzreg").val()&&""===$(".qrreg").val()||(p=c=s=!0,$(".inpReg").eq(3).val().toLowerCase()===$(".yzmbox").text().toLowerCase()?(a=!0,$("p.errorHint").eq(3).css(n)):($("p.errorHint").eq(3).text("验证码错误"),$("p.errorHint").eq(3).css({display:"block",color:"red"}))))}})}),$(".loignReg").each(function(e,r){$(r).on("focus",function(){0===e&&($("p.errorVerb").eq(0).css(o),$("p.errorVerb").eq(0).text("6-16位字符，字母，数字和符号组成")),1===e&&($("p.errorVerb").eq(1).css(o),$("p.errorVerb").eq(1).text("6-16位字符，字母，数字和符号组成"))}),$(r).on("blur",function(){0===e&&(!0===i.test(this.value)?(l=!0,$("p.errorVerb").eq(0).css(n)):($("p.errorVerb").eq(0).text("用户名必须是6-16位，数字，大小字母，和符号组成"),$("p.errorVerb").eq(0).css({display:"block",color:"red"}))),1===e&&(!0===i.test(this.value)?(u=!0,$("p.errorVerb").eq(1).css(n)):($("p.errorVerb").eq(1).text("用户名必须是6-16位，数字，大小字母，和符号组成"),$("p.errorVerb").eq(1).css({display:"block",color:"red"})))})}),!0===$("[name=register]").eq(1).prop("checked")&&($(".inpReg").each(function(e,r){$(r).on("focus",function(){0===e&&($("p.errorHint").eq(0).css(o),$("p.errorHint").eq(0).text("6-16位字符，字母，数字和符号组成")),1===e&&($("p.errorHint").eq(1).css(o),$("p.errorHint").eq(1).text("6-16位字符，字母，数字和符号组成")),2===e&&($("p.errorHint").eq(2).css(o),$("p.errorHint").eq(2).text("确认密码一致")),3===e&&($("p.errorHint").eq(3).css(o),$("p.errorHint").eq(3).text("输入正确验证码"))}),$(r).on("blur",function(){0===e&&(!0===i.test(this.value)?(s=!0,$("p.errorHint").eq(0).css(n)):($("p.errorHint").eq(0).text("用户名必须是6-16位，数字，大小字母，和符号组成"),$("p.errorHint").eq(0).css({display:"block",color:"red"}))),1===e&&(!0===i.test(this.value)?(c=!0,$("p.errorHint").eq(1).css(n)):($("p.errorHint").eq(1).text("用户名必须是6-16位，数字，大小字母，和符号组成"),$("p.errorHint").eq(1).css({display:"block",color:"red"}))),2===e&&($(".inpReg").eq(1).val()===$(".inpReg").eq(2).val()&&""!==this.value?(p=!0,$("p.errorHint").eq(2).css(n)):($("p.errorHint").eq(2).text("密码不一致，请重新输入"),$("p.errorHint").eq(2).css({display:"block",color:"red"}))),3===e&&($(".inpReg").eq(3).val().toLowerCase()===$(".yzmbox").text().toLowerCase()?(a=!0,$("p.errorHint").eq(3).css(n)):($("p.errorHint").eq(3).text("验证码错误"),$("p.errorHint").eq(3).css({display:"block",color:"red"})))})}),$(".fromSubmit").on("click",function(e){var r=$("[name=un]").val(),o=$("[name=pw]").val();if(!0===(l&&u))return t.cookie().setCookie("un",r,10),t.cookie().setCookie("pw",o,10),void $.ajax({url:"http://10.36.144.239/fanke/dist/php/login.php",type:"POST",dataType:"JSON",data:{un:r,pw:o},success:function(e){0===e.code?(alert("登录成功"),location.href="http://10.36.144.239/fanke/dist/index.html"):1===e.code&&alert("输入有误，请重新输入")}});$(".loignReg").each(function(e,r){0===e?""===this.value&&($("p.errorVerb").eq(0).text("用户名不能为空"),$("p.errorVerb").eq(0).css({display:"block",color:"red"})):1===e&&""===this.value&&($("p.errorVerb").eq(1).text("密码不能为空"),$("p.errorVerb").eq(1).css({display:"block",color:"red"}))}),!0===(s&&c&&a&&p)?(t.cookie().setCookie("un",r,10),t.cookie().setCookie("pw",o,10),$.ajax({url:"http://10.36.144.239/fanke/dist/php/register.php",type:"POST",dataType:"JSON",data:{un:r,pw:o},success:function(e){0===e.code?(alert("注册成功，请登录"),location.href="http://10.36.144.239/fanke/dist/login.html"):1===e.code&&alert("用户名已存在，请重新输入")}})):($(".inpReg").each(function(e,r){0===e?""===this.value&&($("p.errorHint").eq(0).text("用户名不能为空"),$("p.errorHint").eq(0).css({display:"block",color:"red"})):1===e?""===this.value&&($("p.errorHint").eq(1).text("密码不能为空"),$("p.errorHint").eq(1).css({display:"block",color:"red"})):2===e?""===this.value&&($("p.errorHint").eq(2).text("确认密码不能为空"),$("p.errorHint").eq(2).css({display:"block",color:"red"})):3===e&&""===this.value&&($("p.errorHint").eq(3).text("密码不能为空"),$("p.errorHint").eq(3).css({display:"block",color:"red"}))}),e.preventDefault())}))},common:function(){return{getRandom:function(e,r){return(r=e<(r=r||0)?e+0*(e=r):(e=e,r))+Math.floor(Math.random()*(e-r+1))},color:function(){for(var e="#",r=0;r<6;r++)e+=this.getRandom(15).toString(16);return e},yzm:function(e){for(var r="",o=0;o<e;o++){var t=this.getRandom(48,122);48<=t&&t<=57||65<=t&&t<=90||97<=t&&t<=122?r+=String.fromCharCode(t):o--}return r}}},cookie:function(){return{getCookie:function(e){var r=document.cookie.split(";");for(var o in r){var t=r[o].split("=");if(this.trim(t[0])==e)return t[1]}return null},setCookie:function(e,r,o){var t=new Date;t.setDate(t.getDate()+o),document.cookie=e+"="+r+";expires="+t.toString()},trim:function(e){return e.replace(/\s+/g,"")}}}}).init()});